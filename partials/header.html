<header class="topbar">
  <div class="topbar-left">
    <img
      class="topbar-avatar"
      src="assets/icons/profileLogo.png"
      alt="Neo avatar"
    />
  </div>

  <!-- Desktop nav pill -->
  <nav class="topbar-nav" aria-label="Primary">
    <a class="topbar-link is-active" href="index.html">Home</a>
    <span class="topbar-sep">/</span>
    <a class="topbar-link" href="about.html">About</a>
    <span class="topbar-sep">/</span>
    <a class="topbar-link" href="projects.html">Projects</a>
  </nav>

  <div class="topbar-right">
    <!-- Desktop CTA -->
    <a class="topbar-cta topbar-cta-desktop" href="contact.html">
      <span class="cta-icon">✉</span>
      Contact Me
    </a>

    <!-- Mobile burger -->
    <button
      class="topbar-burger"
      type="button"
      aria-label="Open menu"
      aria-controls="mobileSidebar"
      aria-expanded="false"
    >
      <span class="burger-lines" aria-hidden="true">
        <span></span><span></span><span></span>
      </span>
    </button>
  </div>
</header>

<!-- Mobile scrim + sidebar -->
<div class="nav-scrim" data-nav-close aria-hidden="true"></div>

<aside class="mobile-sidebar" id="mobileSidebar" aria-label="Mobile menu">
  <div class="mobile-sidebar-head">
    <div class="mobile-brand">
      <img
        class="mobile-avatar"
        src="assets/icons/profileLogo.png"
        alt="Neo avatar"
      />
      <div class="mobile-brand-text">
        <div class="mobile-name">Neo Monserrat</div>
        <div class="mobile-sub">Navigation</div>
      </div>
    </div>

    <button class="sidebar-close" type="button" aria-label="Close menu" data-nav-close>
      ✕
    </button>
  </div>

  <nav class="mobile-nav" aria-label="Mobile primary">
    <a class="mobile-link is-active" href="index.html">Home</a>
    <a class="mobile-link" href="about.html">About</a>
    <a class="mobile-link" href="projects.html">Projects</a>
  </nav>

  <div class="mobile-cta-wrap">
    <a class="mobile-cta" href="contact.html">
      <span class="cta-icon">✉</span>
      Contact Me
    </a>
  </div>
</aside>

<script>
  (() => {
    const root = document.documentElement;
    const burger = document.querySelector(".topbar-burger");
    const scrim = document.querySelector(".nav-scrim");
    const sidebar = document.querySelector("#mobileSidebar");
    const closeBtns = document.querySelectorAll("[data-nav-close]");
    const links = document.querySelectorAll(".mobile-link");

    const openNav = () => {
      root.classList.add("nav-open");
      burger?.setAttribute("aria-expanded", "true");
      document.body.style.overflow = "hidden";
    };

    const closeNav = () => {
      root.classList.remove("nav-open");
      burger?.setAttribute("aria-expanded", "false");
      document.body.style.overflow = "";
    };

    burger?.addEventListener("click", () => {
      root.classList.contains("nav-open") ? closeNav() : openNav();
    });

    closeBtns.forEach((b) => b.addEventListener("click", closeNav));
    links.forEach((a) => a.addEventListener("click", closeNav));

    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeNav();
    });

    // Safety: if resizing to desktop, ensure it closes
    window.addEventListener("resize", () => {
      if (window.matchMedia("(min-width: 721px)").matches) closeNav();
    });
  })();
</script>
